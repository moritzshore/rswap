<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>an R interface for the SWAP model • rswap</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="an R interface for the SWAP model">
<meta property="og:description" content="R-based interface for calibrating the SWAP model (among other
    things).">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">rswap</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/moritzshore/rswap/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div class="section level1">
<div class="page-header"><h1 id="rswap-">rswap <img src="reference/figures/logo.png" align="right" height="138"><a class="anchor" aria-label="anchor" href="#rswap-"></a>
</h1></div>
<p>rswap is an R-package designed to help interface and work with <a href="https://www.swap.alterra.nl/" class="external-link">SWAP4</a> <a href="#id_1">[1]</a>. It consists of a variety of functions that assist the user in otherwise tedious and repetitive tasks during the calibration process. The scope of the package will hopefully be expanded overtime to include sensitivity analysis, multi-core parallelization, autocalibration / PEST integration, scenario runs, and much more. <strong>DISCLAIMER: rswap is very much in development, and therefore not robustly tested, nor extremely stable. use at your own risk, and be critical of the results, for now..</strong></p>
<p><img src="https://img.shields.io/github/r-package/v/moritzshore/rswap" alt="GitHub R package version"><img src="https://img.shields.io/github/issues/moritzshore/rswap" alt="GitHub issues"><img src="https://img.shields.io/github/license/moritzshore/rswap" alt="GitHub"><a href="https://doi.org/10.5281/zenodo.7795153" class="external-link"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.7795153.svg" alt="DOI"></a></p>
</div>
<div class="section level1">
<h1 id="table-of-contents">Table of contents<a class="anchor" aria-label="anchor" href="#table-of-contents"></a>
</h1>
<ol style="list-style-type: decimal">
<li><a href="#install">Installing rswap</a></li>
<li><a href="#run">Running SWAP</a></li>
<li><a href="#data">Accessing data</a></li>
<li><a href="#visuals">Visuals</a></li>
<li><a href="#performance">Model Performance</a></li>
<li><a href="#saving">Saving model runs</a></li>
<li><a href="#compare">Comparing model runs</a></li>
<li><a href="#mod">Modification of Parameters</a></li>
<li><a href="#swaptools">SWAPtools Integration</a></li>
<li><a href="#misc">Miscellaneous functions</a></li>
<li><a href="#roadmap">Roadmap</a></li>
<li><a href="#support">Support and Contributing</a></li>
<li>
<a href="#ack">Acknowledgements</a> <a href="#ref">References</a>
</li>
</ol>
<div class="section level2">
<h2 id="installing-rswap-">Installing <code>rswap</code> <a name="install"></a>
<a class="anchor" aria-label="anchor" href="#installing-rswap-"></a>
</h2>
<p>You can install <code>rswap</code> from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install remotes, if not already present</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="st">"moritzshore/rswap"</span>, ref <span class="op">=</span> <span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/github_refs.html" class="external-link">github_release</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://moritzshore.github.io/rswap/" class="external-link">rswap</a></span><span class="op">)</span></span></code></pre></div>
<p>A useful place to start would be the <code><a href="reference/rswap_init.html">rswap_init()</a></code> function. This function creates the “Hupselbrook” example case in the same directory as your <code>swap.exe</code>. It goes on to run the setup, copy in the observed data template file, and plot the results. If this function finished successfully, you know <code>rswap</code> is working properly.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">project_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/rswap_init.html">rswap_init</a></span><span class="op">(</span>swapexe <span class="op">=</span> <span class="st">"C:/path/to/swap.exe"</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p><strong>Hint:</strong> You can use this <code>project_path</code> to run all the following example code on this page!</p>
</blockquote>
<p><strong>⚠️IMPORTANT⚠️</strong> Its important to know that <code>rswap</code> never modifies files in your project directory (<code>project_path</code>) unless stated otherwise. Instead all files are <em>copied</em> from <code>project_path</code> to <code>project_path/rswap</code>, modified there, and executed. All results are stored there as well and will be overwritten over time. Remember to save your results if you would like to keep them (<code>save_run(), write_swap_file()</code>), and remember that anything in the <code>project_path/rswap</code> directory is temporary!</p>
</div>
<div class="section level2">
<h2 id="running-swap-">Running SWAP <a name="run"></a>
<a class="anchor" aria-label="anchor" href="#running-swap-"></a>
</h2>
<p>The SWAP model can be run using the <code><a href="reference/run_swap.html">run_swap()</a></code> function. It needs to know where your model setup is located (<code>project_path</code>). The <code>swap.exe</code> must be located in the parent directory of <code>project_path</code>!</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/run_swap.html">run_swap</a></span><span class="op">(</span><span class="va">project_path</span>, autoset_output <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="reference/run_swap.html">run_swap()</a></code> can be further customized with the following parameters:</p>
<ul>
<li>
<code>swap_file</code> can be set to a custom name for your SWAP main file (*.swp)</li>
<li>
<code>autoset_output</code> can be enabled (recomended), such that the output of the SWAP model matches your provided observed data</li>
<li>
<code>timeout</code> sets the max allowed runtime of SWAP</li>
<li>
<code>force</code> forces a rebuild of the the rswap project from the source files (WIP)</li>
<li>
<code>verbose</code> Prints everything the function does to the console with pretty colors</li>
</ul>
</div>
<div class="section level2">
<h2 id="accessing-data-">Accessing Data <a name="data"></a>
<a class="anchor" aria-label="anchor" href="#accessing-data-"></a>
</h2>
<div class="section level3">
<h3 id="modelled-data">Modelled Data<a class="anchor" aria-label="anchor" href="#modelled-data"></a>
</h3>
<p>To read the output of your executed SWAP run, you can use the following command:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">modelled_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/load_swap_output.html">load_swap_output</a></span><span class="op">(</span><span class="va">project_path</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="reference/load_swap_output.html">load_swap_output()</a></code> returns two dataframes, <code>daily_output</code> which contains depth wise values of various variables. The other is <code>custom_depth</code> which contains custom variables at custom depths either explicitly altered by the user, or automatically parsed by the <code>autoset_output</code> flag of <code><a href="reference/run_swap.html">run_swap()</a></code>. This dataframe is used widely throughout the package. (more/all results will be added over time)</p>
</div>
<div class="section level3">
<h3 id="observed-data">Observed Data<a class="anchor" aria-label="anchor" href="#observed-data"></a>
</h3>
<p>As <code>rswap</code> heavily revolves around calibration, observed data is of high importance. When running <code><a href="reference/build_rswap_directory.html">build_rswap_directory()</a></code> a template observed file will be copied into the <code>project_directory</code> (if not already existing). It is up to the user to fill this file with the appropriate data and column names. Documentation for how to do this is in a companion text file.</p>
<p>To load your observed file, you can use the following command:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">observed_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/load_swap_observed.html">load_swap_observed</a></span><span class="op">(</span><span class="va">project_path</span><span class="op">)</span></span></code></pre></div>
<p>Which will return a dataframe of the user-entered observed data</p>
<p>To find out what observed variables you have, as well as their depths, you can use:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_swap_variables.html">get_swap_variables</a></span><span class="op">(</span><span class="va">observed_data</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/get_swap_depths.html">get_swap_depths</a></span><span class="op">(</span><span class="va">observed_data</span><span class="op">)</span></span></code></pre></div>
<p>..this can also be filtered by a specific variable by passing <code>variable</code></p>
</div>
</div>
<div class="section level2">
<h2 id="visuals-">Visuals <a name="visuals"></a>
<a class="anchor" aria-label="anchor" href="#visuals-"></a>
</h2>
<p>There are a variety of functions used to visualize your SWAP data, such as <code><a href="reference/rswap_plot_variable.html">rswap_plot_variable()</a></code></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rswap_plot_variable.html">rswap_plot_variable</a></span><span class="op">(</span><span class="va">project_path</span>, variable <span class="op">=</span> <span class="st">"WC"</span>, depth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">40</span>, <span class="fl">70</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="reference/rswap_plot_variable.html">rswap_plot_variable()</a></code> can be passed a <code>variable</code>, as well as a vector <code>depth</code>.</p>
<p align="center">
</p>
<p><img src="reference/figures/overunder.png" width="60%" height="60%"></p>

<p>For a more detailed look at multiple variables at once, you can use the <code><a href="reference/rswap_plot_multi.html">rswap_plot_multi()</a></code></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rswap_plot_multi.html">rswap_plot_multi</a></span><span class="op">(</span><span class="va">project_path</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"H"</span>, <span class="st">"WC"</span>, <span class="st">"DRAINAGE"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>This function can be passed up to 3 variables, and will display them interactively on the same plot. If observed data is available, it will be displayed as well.</p>
<p align="center">
</p>
<p><img src="reference/figures/softcalplot.png" width="60%" height="60%"></p>

</div>
<div class="section level2">
<h2 id="model-performance-">Model Performance <a name="performance"></a>
<a class="anchor" aria-label="anchor" href="#model-performance-"></a>
</h2>
<p>A few functions focus on assessing model performance by comparing modelling values to user provided observed values. This functionality is based on the <code><a href="reference/get_swap_performance.html">get_swap_performance()</a></code> function:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_swap_performance.html">get_swap_performance</a></span><span class="op">(</span><span class="va">project_path</span>, stat <span class="op">=</span> <span class="st">"d"</span>, variable <span class="op">=</span> <span class="st">"WC"</span>, depth <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span></code></pre></div>
<p>This function is very flexible and can be passed any number of <code>variables</code>, <code>depths</code>, and performance indicators <code>stat</code> (currently supported are select functions from package <code>hydroGOF</code>)</p>
</div>
<div class="section level2">
<h2 id="saving-runs-">Saving Runs <a name="saving"></a>
<a class="anchor" aria-label="anchor" href="#saving-runs-"></a>
</h2>
<p>While calibrating a model it can be useful to keep track of different model runs with different parameterization. <code>rswap</code> aids this process with a variety of functions, such as</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/save_swap_run.html">save_swap_run</a></span><span class="op">(</span><span class="va">project_path</span>, run_name <span class="op">=</span> <span class="st">"COFRED = 0.35"</span><span class="op">)</span></span></code></pre></div>
<p>This function saves your entire model set up in a directory (<code>project_directory/rswap_saved</code>). Once a model run has been saved, it can be compared to other model runs, with the following functions.</p>
</div>
<div class="section level2">
<h2 id="comparing-runs-">Comparing Runs <a name="compare"></a>
<a class="anchor" aria-label="anchor" href="#comparing-runs-"></a>
</h2>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rswap_plot_compare.html">rswap_plot_compare</a></span><span class="op">(</span><span class="va">project_path</span>, variable <span class="op">=</span> <span class="st">"WC"</span>, depth <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span></code></pre></div>
<p align="center">
</p>
<p><img src="reference/figures/compareplot.png" width="60%" height="60%"></p>

<p>Once again, this function is quite flexible, and can be passed any available <code>variable</code> or <code>depth</code></p>
<p>You can compare the performance of your various model runs by using the <code><a href="reference/rswap_plot_performance.html">rswap_plot_performance()</a></code> function.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rswap_plot_performance.html">rswap_plot_performance</a></span><span class="op">(</span><span class="va">project_path</span>, stat <span class="op">=</span> <span class="st">"d"</span>, var <span class="op">=</span> <span class="st">"WC"</span>, depth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">40</span>,<span class="fl">70</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p align="center">
</p>
<p><img src="reference/figures/stat_plot1.png" width="60%" height="60%"></p>

<p>This plot is equally flexible and can be passed any <code>variable</code> and any amount of <code>depths</code> for any supported <code>stat</code>.</p>
</div>
<div class="section level2">
<h2 id="modification-of-parameters-">Modification of Parameters <a name="mod"></a>
<a class="anchor" aria-label="anchor" href="#modification-of-parameters-"></a>
</h2>
<p>Changing of parameters, tables, and vectors of the SWAP main file can be done with <code>rswap</code>. The simple way of doing this is by using the <code><a href="reference/modify_swap_file.html">modify_swap_file()</a></code> function:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/modify_swap_file.html">modify_swap_file</a></span><span class="op">(</span>project_path <span class="op">=</span> <span class="va">project_path</span>,</span>
<span>  input_file <span class="op">=</span> <span class="st">"swap.swp"</span>, output_file <span class="op">=</span> <span class="st">"swap_mod.swp"</span>,</span>
<span>  variable <span class="op">=</span> <span class="st">"ORES"</span>, value <span class="op">=</span> <span class="st">"0.43"</span>, row <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>This function has many different behaviors depending on which flags are enabled, and which arguments are passed. For more information, check the <strong>Details</strong> in the help page of the function.</p>
<p><strong>⚠️ If used incorrectly, this function can overwrite your swap file!</strong> <em>Check the Details page!</em></p>
<p><code>rswap</code> uses a whole set of functions for the reading, altering, and writing of SWAP parameters. While <code><a href="reference/modify_swap_file.html">modify_swap_file()</a></code> covers most use-cases, the underlying functions can be of use as well, for more advanced work flows. You can read more about them in their documentation.</p>
<div class="section level4">
<h4 id="general-parameter-functions">General parameter functions:<a class="anchor" aria-label="anchor" href="#general-parameter-functions"></a>
</h4>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># removes any non-essential data from the input file:</span></span>
<span><span class="fu"><a href="reference/clean_swap_file.html">clean_swap_file</a></span><span class="op">(</span><span class="va">project_path</span><span class="op">)</span> </span>
<span><span class="co"># parses the data to be R-readable:</span></span>
<span><span class="fu"><a href="reference/parse_swap_file.html">parse_swap_file</a></span><span class="op">(</span><span class="va">project_path</span><span class="op">)</span> </span>
<span><span class="co"># writes the SWAP main file sourced from ".csv" files stored in the rswap directory</span></span>
<span><span class="fu"><a href="reference/write_swap_file.html">write_swap_file</a></span><span class="op">(</span><span class="va">project_path</span>, outfile <span class="op">=</span> <span class="st">"swap_modified.swp"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="parameter-specific-functions">Parameter specific functions:<a class="anchor" aria-label="anchor" href="#parameter-specific-functions"></a>
</h4>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">param</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/load_swap_parameters.html">load_swap_parameters</a></span><span class="op">(</span><span class="va">project_path</span><span class="op">)</span></span>
<span><span class="va">param</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/change_swap_parameter.html">change_swap_parameter</a></span><span class="op">(</span><span class="va">param</span>, name <span class="op">=</span> <span class="st">"SHAPE"</span>, value <span class="op">=</span> <span class="st">"0.75"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/write_swap_parameters.html">write_swap_parameters</a></span><span class="op">(</span><span class="va">project_path</span>, <span class="va">param</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="table-specific-functions">Table specific functions:<a class="anchor" aria-label="anchor" href="#table-specific-functions"></a>
</h4>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tables</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/load_swap_tables.html">load_swap_tables</a></span><span class="op">(</span><span class="va">project_path</span><span class="op">)</span></span>
<span><span class="va">tables</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/change_swap_table.html">change_swap_table</a></span><span class="op">(</span><span class="va">tables</span>, variable <span class="op">=</span> <span class="st">"OSAT"</span>, row <span class="op">=</span> <span class="fl">1</span>, value <span class="op">=</span> <span class="st">"0.34"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/write_swap_tables.html">write_swap_tables</a></span><span class="op">(</span><span class="va">project_path</span>, <span class="va">tables</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="vector-specific-functions">Vector specific functions:<a class="anchor" aria-label="anchor" href="#vector-specific-functions"></a>
</h4>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vectors</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/load_swap_vectors.html">load_swap_vectors</a></span><span class="op">(</span><span class="va">project_path</span><span class="op">)</span></span>
<span><span class="va">vectors</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/change_swap_vector.html">change_swap_vector</a></span><span class="op">(</span><span class="va">vectors</span>, variable <span class="op">=</span> <span class="st">"OUTDAT"</span>, index <span class="op">=</span> <span class="fl">1</span>, value <span class="op">=</span> <span class="st">"10-jun-2013"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/write_swap_vectors.html">write_swap_vectors</a></span><span class="op">(</span><span class="va">project_path</span>, <span class="va">vectors</span><span class="op">)</span></span></code></pre></div>
<p>⚠️ You have the choice of passing the value in <code>character</code> format as shown above, to assure <code>FORTRAN</code> compatible format, or you can use the <code><a href="reference/set_swap_format.html">set_swap_format()</a></code> function, to convert your value to the <code>FORTRAN</code> compatible format.</p>
<p>To run SWAP with the modifications you’ve made to your parameters, you need to make sure you <code><a href="reference/write_swap_file.html">write_swap_file()</a></code> before running <code><a href="reference/run_swap.html">run_swap()</a></code> – <strong>All changes in <code>/rswap/</code> are temporary until you write your SWAP file!</strong></p>
<blockquote>
<p>This functionality is currently only tested for the SWAP main file. Support for the other SWAP input files is coming soon©</p>
</blockquote>
</div>
</div>
<div class="section level2">
<h2 id="swaptools-integration-">SWAPtools integration <a name="swaptools"></a>
<a class="anchor" aria-label="anchor" href="#swaptools-integration-"></a>
</h2>
<p>The following features are possible when using <code>rswap</code> with another SWAP-related R-package: <code>SWAPtools</code></p>
<p><code><a href="reference/get_swap_format.html">get_swap_format()</a></code> returns the format of the given parameter, whereas <code><a href="reference/set_swap_format.html">set_swap_format()</a></code> forces the value of the given parameter into the FORTRAN-required format. These functions rely on data from package <code>SWAPtools</code>. (Over time, <code><a href="reference/change_swap_par.html">change_swap_par()</a></code> will use these automatically to protect you from incorrect formats)</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_swap_format.html">get_swap_format</a></span><span class="op">(</span>parameters <span class="op">=</span> <span class="st">"ALTW"</span><span class="op">)</span></span>
<span><span class="co"># [1] "float"</span></span>
<span></span>
<span><span class="fu"><a href="reference/set_swap_format.html">set_swap_format</a></span><span class="op">(</span>parameter <span class="op">=</span> <span class="st">"ALTW"</span>, value <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co"># [1] "5.0"</span></span></code></pre></div>
<p>More functionality will be implemented over time.</p>
</div>
<div class="section level2">
<h2 id="miscellaneous-functions-">Miscellaneous functions <a name="misc"></a>
<a class="anchor" aria-label="anchor" href="#miscellaneous-functions-"></a>
</h2>
<p>The aforementioned functions rely on more basic general functions which, while are designed for internal use, can possibly also be of assistance to the end user. These are listed below.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load data</span></span>
<span><span class="va">ob_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/load_swap_observed.html">load_swap_observed</a></span><span class="op">(</span><span class="va">project_path</span><span class="op">)</span></span>
<span><span class="va">mod_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/load_swap_output.html">load_swap_output</a></span><span class="op">(</span><span class="va">project_path</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filters SWAP data (observed or modelled) by variable and depth</span></span>
<span><span class="va">mod_filt</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/filter_swap_data.html">filter_swap_data</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mod_dat</span><span class="op">$</span><span class="va">custom_depth</span>, var <span class="op">=</span> <span class="st">"WC"</span>, depth <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span><span class="va">ob_filt</span> <span class="op">&lt;-</span>  <span class="fu"><a href="reference/filter_swap_data.html">filter_swap_data</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mod_dat</span><span class="op">$</span><span class="va">custom_depth</span>, var <span class="op">=</span> <span class="st">"WC"</span>, depth <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filters and Matches dataframe structure of observed and modelled</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/match_swap_data.html">match_swap_data</a></span><span class="op">(</span><span class="va">project_path</span>, variable <span class="op">=</span> <span class="st">"WC"</span>, depth <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Melts together all saved runs + current into tidy format</span></span>
<span><span class="fu"><a href="reference/melt_swap_runs.html">melt_swap_runs</a></span><span class="op">(</span><span class="va">project_path</span>, variable <span class="op">=</span> <span class="st">"WC"</span>, depth <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="roadmap-">Roadmap <a name="roadmap"></a>
<a class="anchor" aria-label="anchor" href="#roadmap-"></a>
</h2>
<div class="section level3">
<h3 id="major">Major<a class="anchor" aria-label="anchor" href="#major"></a>
</h3>
<ul>
<li>Linux Support (0.4.0)</li>
<li>Sensitivity analysis (0.5.0)</li>
<li>Multi-core running (0.6.0)</li>
<li>Autocalibration / PEST integration (0.7.0)</li>
<li>Scenario runs (0.8.0)</li>
<li>SWAPtools plotting integration (0.9.0)</li>
<li>…(1.0)</li>
</ul>
</div>
<div class="section level3">
<h3 id="minor">Minor<a class="anchor" aria-label="anchor" href="#minor"></a>
</h3>
<ul>
<li>Parsing support for all SWAP files, not just the main file.</li>
<li>Add support for multiple variables at differing depths for <code>autoset_output</code>
</li>
<li>Add support for reading saved runs with differing output.</li>
<li>Add “exact variable matching” and stop removing “RAIN” in <code>io.R</code> <code><a href="reference/melt_all_runs.html">melt_all_runs()</a></code>
</li>
<li>Renovate <code><a href="reference/rswap_plot_multi.html">rswap_plot_multi()</a></code> to accept any variable using the new system.</li>
<li>Load data into package environment, to prevent the need for constant re-loading. add force=T option to reload</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="support-and-contributing-">Support and Contributing <a name="support"></a>
<a class="anchor" aria-label="anchor" href="#support-and-contributing-"></a>
</h2>
<p>If you run into any bugs or problems, please open an <a href="https://github.com/moritzshore/rswap/issues" class="external-link">issue</a>. The same goes for if you have any suggestions for improvement. If would you like to contribute to the project, let me know! Very open towards collaborative improvement. Fork/Branch off as you please :)</p>
<p>Any OPTAIN case-studies which use <code>rswap</code> are required to bake Moritz Shore a <code>cake</code> using a local recipe from the case-study country.</p>
</div>
<div class="section level2">
<h2 id="acknowledgements-">Acknowledgements <a name="ack"></a>
<a class="anchor" aria-label="anchor" href="#acknowledgements-"></a>
</h2>
<p>This package was developed for the <a href="https://optain.eu" class="external-link">OPTAIN</a> project and has received funding from the European Union’s Horizon 2020 research and innovation program under grant agreement No. 862756.</p>
</div>
<div class="section level2">
<h2 id="references-">References <a name="ref"></a>
<a class="anchor" aria-label="anchor" href="#references-"></a>
</h2>
<p>[1] Van Dam, J. Field-Scale Water Flow and Solute Transport: SWAP Model Concepts, Parameter Estimation, and Case Studies. Ph.D. Thesis, Wageningen University, Wageningen, The Netherlands, 2000. <a name="1"></a></p>
<p align="center">
</p>
<p><img src="reference/figures/support_banner.png" width="70%" height="70%"></p>

</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/moritzshore/rswap/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/moritzshore/rswap/issues" class="external-link">Report a bug</a></li>
<li><a href="https://github.com/moritzshore/rswap/issues" class="external-link">Suggestions and feedback</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rswap</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Moritz Shore <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-7586-997X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Moritz Shore.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
